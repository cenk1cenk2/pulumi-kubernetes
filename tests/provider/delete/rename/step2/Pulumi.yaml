name: delete-with-rename
runtime: yaml
description: |
  Changing a resource's name, but leaving .metadata untouched, should not
  result in a deletion from the cluster.

resources:
  # Change the resource's name from "ns" to "namespace" but leave everything
  # else the same.
  namespace:
    type: kubernetes:core/v1:Namespace
    properties:
      metadata:
        name: rename-namespace
        namespace: rename-namespace

  pod:
    type: kubernetes:core/v1:Pod
    properties:
      metadata:
        namespace: rename-namespace
      spec:
        containers:
          - image: nginx:1.14.2
            name: nginx
            ports:
              - containerPort: 80
